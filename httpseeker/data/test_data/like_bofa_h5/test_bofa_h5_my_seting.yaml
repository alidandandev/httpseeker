# 点赞博发web站点登录后默认API测试用例集合
config:
  allure:
    epic: "C端用户的登录后查询我的页面数据"
    feature: "我的页面"
    story: "我的设置"
    severity: "critical"

  request:
    env: "like_bofa_h5_test.env"  # 需要在run_env目录下创建test.env文件
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false

  module: "my"

test_steps:

  - name: "登录"
    case_id: "cdb_my_set_000"
    description: "用户登录接口"
    request:
      method: "POST"
      url: "/cdb/api/auth/login_v1"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        account: "17838289382"
        pwd: "1OjGU8CSi95H9fzsNBpgUg=="
        internationalCode: "86"
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - extract:
          key: "user_token"
          type: "cache"
          jsonpath: "$.json.data"


  - name: "修改、新增收货地址"
    case_id: "cdb_my_set_001"
    description: "新增、编辑收货地址"

    request:
      method: "PUT"
      url: "/cdb//api/userDeliveryAddress/update"
      params: null
      headers:
        tk: "${user_token}"
      cookies: null
      body_type: "json"
      body:
        recipientName: "地址"
        recipientPhone: "7848393232"
        region: "北京市北京市东城区"
        detailedAddress: "32323"
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"



  - name: "设置交易密码"
    case_id: "cdb_my_set_002"
    description: "校验设置交易密码接口功能"

    request:
      method: "POST"
      url: "/cdb/api/auth/changePayPassword"
      params: null
      headers:
        tk: "${user_token}"
      cookies: null
      body_type: "json"
      body:
        oldPassword: "O4zAs9Mz4aoYOirIST4Xyg=="
        newPassword: "O4zAs9Mz4aoYOirIST4Xyg=="
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"



  - name: "修改用户名称"
    case_id: "cdb_my_set_003"
    description: "校验修改用户接口功能"

    request:
      method: "POST"
      url: "/cdb/api/auth/changeUname"
      params: null
      headers:
        tk: "${user_token}"
      cookies: null
      body_type: "json"
      body:
        name: "${hook.random_phone()}"
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

  - name: "修改登录密码"
    case_id: "cdb_my_set_004"
    description: "修改登录密码口功能"
    request:
      method: "POST"
      url: "/cdb/api/auth/changePassword"
      params: null
      headers:
        tk: "${user_token}"
      cookies: null
      body_type: "json"
      body:
        oldPassword: "1OjGU8CSi95H9fzsNBpgUg=="
        newPassword: "1OjGU8CSi95H9fzsNBpgUg=="
      files: null
    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"










