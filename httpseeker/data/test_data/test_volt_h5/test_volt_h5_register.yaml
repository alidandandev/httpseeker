# volt站点H5注册流程测试
config:
  allure:
    epic: "注册登录"
    feature: "注册"
    story: "后台登录获取验证码，H5前端注册"
    severity: "P0"

  request:
    env: "test_volt.env"
    headers:
      Content-Type: "application/json;charset=UTF-8"
    timeout: 30
    verify: false

  module: "Register&Login"

test_steps:
  # ========== 步骤1: 登录后台 ==========
  - name: "登录后台"
    case_id: "volt_register_001"
    description: "0987654321账号登录管理后台"

    request:
      method: "POST"
      url: "https://cdbqatadmin.ye81s.com/cdb/account/login"
      params: null
      headers:
        Content-Type: application/json
        User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
      cookies: null
      body_type: "json"
      body:
        username: "0987654321"
        password: "75OIo26rz2WLN02K4ZH6yQ=="
        ggcode: "${get_google_auth_code()}"
      files: null

    teardown:
      - assert:
          check: "验证状态码"
          type: "eq"
          value: 200
          jsonpath: "$.status_code"

      - assert:
          check: "验证业务成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证VIP列表不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

      - extract:
          key: "idw"
          type: "cache"
          jsonpath: "$.json.data[0].idw"

