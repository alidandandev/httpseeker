# volt站点H5登录流程测试
config:
  allure:
    epic: "注册登录"
    feature: "登录"
    story: "使用注册好的账号，直接登录"
    severity: "critical"

  request:
    env: "test_volt.env"
    headers:
      Content-Type: "application/json;charset=UTF-8"
    timeout: 30
    verify: false

  module: "Register&Login"

test_steps:
  # ========== 步骤1: 登录后台 ==========
  - name: "登录后台"
    case_id: "volt_register_001"
    description: "0987654321账号登录管理后台"

    request:
      method: "POST"
      url: "https://cdbvolt.ye81s.com/cdb/api/auth/login_v1"
      params: null
      headers:
        Content-Type: application/json
        User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36
      cookies: null
      body_type:  "json"
      body:
        account: "77777777"
        pwd: "zVZQ5HqOayF7tJYFz6tIhA=="
        internationalCode: "86"
      files: null

    teardown:
      - assert:
          check: "验证状态码"
          type: "eq"
          value: 200
          jsonpath: "$.status_code"

      - assert:
          check: "验证业务成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

