# bofa站点admin后台首页
config:
  allure:
    epic: "bofa站点admin后台"
    feature: "用户管理_团队查询"
    story: "页面所有数据接口"
    severity: "critical"

  request:
    env: "like_bofa_admin_test.env"  # 需要在run_env目录下创建test.env文件
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false

  module: "userMgmt_teamQuery"

test_steps:
  - name: "登录"
    case_id: "cdb_bofa_login_001"
    description: "登录拿token"

    request:
      method: "POST"
      url: "/cdb/account/login"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        username: ethans
        password: 75OIo26rz2WLN02K4ZH6yQ==
        ggcode: ${get_login_google_auth_code()}
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

      - extract:
          key: "token"
          type: "cache"
          jsonpath: "$.json.data.token"

  # ========== 步骤2: 用户管理模块-团队查询子模块-模块一数据(autotester309113/286268)==========
  - name: "模块一数据"
    case_id: "cdb_bofa_userMgmt_teamQuery_001"
    description: "用户管理模块-团队查询子模块-模块一数据"

    request:
      method: "GET"
      url: "/cdb/dzvip/teamvip/teamStatisticsOne?phone=autotester309113"
      params: null
      headers:
        Authorization: "${token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  # ========== 步骤3: 用户管理模块-用户列表子模块-模块二数据(autotester309113/286268)==========
  - name: "模块二数据"
    case_id: "cdb_bofa_userMgmt_teamQuery_002"
    description: "用户管理模块-用户列表子模块-模块二数据"

    request:
      method: "GET"
      url: "/cdb/dzvip/teamvip/teamStatisticsTwo?phone=autotester309113"
      params: null
      headers:
        Authorization: "${token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  # ========== 步骤4: 用户管理模块-用户列表子模块-模块三数据(autotester309113/286268)==========
  - name: "模块三数据"
    case_id: "cdb_bofa_userMgmt_teamQuery_003"
    description: "用户管理模块-用户列表子模块-模块三数据"

    request:
      method: "GET"
      url: "/cdb/dzvip/teamvip/teamStatisticsThree?phone=autotester309113"
      params: null
      headers:
        Authorization: "${token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  # ========== 步骤5: 用户管理模块-用户列表子模块-模块四数据(autotester309113/286268)==========
  - name: "模块四数据"
    case_id: "cdb_bofa_userMgmt_teamQuery_004"
    description: "用户管理模块-用户列表子模块-模块四数据"

    request:
      method: "GET"
      url: "/cdb/dzvip/teamvip/teamStatisticsFour?phone=autotester309113"
      params: null
      headers:
        Authorization: "${token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  # ========== 步骤6: 用户管理模块-用户列表子模块-模块五数据(autotester309113/286268)==========
  - name: "模块五数据"
    case_id: "cdb_bofa_userMgmt_teamQuery_005"
    description: "用户管理模块-用户列表子模块-模块五数据"

    request:
      method: "GET"
      url: "/cdb/dzvip/teamvip/teamStatisticsFive?phone=autotester309113"
      params: null
      headers:
        Authorization: "${token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  # ========== 步骤7: 用户管理模块-用户列表子模块-模块六数据(autotester309113/286268)==========
  - name: "模块六数据"
    case_id: "cdb_bofa_userMgmt_teamQuery_006"
    description: "用户管理模块-用户列表子模块-模块六数据"

    request:
      method: "GET"
      url: "/cdb/dzvip/teamvip/teamStatisticsSex?phone=autotester309113"
      params: null
      headers:
        Authorization: "${token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  # ========== 步骤8: 用户管理模块-用户列表子模块-获取团队VIP用户信息(autotester309113/286268)==========
  - name: "获取团队VIP用户信息"
    case_id: "cdb_bofa_userMgmt_teamQuery_007"
    description: "用户管理模块-用户列表子模块-获取团队VIP用户信息"

    request:
      method: "GET"
      url: "/cdb/dzvip/teamvip/getUserInformation?phone=autotester309113"
      params: null
      headers:
        Authorization: "${token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  # ========== 步骤9: 用户管理模块-用户列表子模块-获取团队VIP等级数量(autotester309113/286268)==========
  - name: "获取团队VIP等级数量"
    case_id: "cdb_bofa_userMgmt_teamQuery_008"
    description: "用户管理模块-用户列表子模块-获取团队VIP等级数量"

    request:
      method: "GET"
      url: "/cdb/dzvip/teamvip/numberOfVipLevels?phone=autotester309113"
      params: null
      headers:
        Authorization: "${token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  # ========== 步骤10: 用户管理模块-用户列表子模块-获取列表数据(autotester309113/286268)==========
  - name: "获取列表数据"
    case_id: "cdb_bofa_userMgmt_teamQuery_009"
    description: "用户管理模块-用户列表子模块-获取列表数据"

    request:
      method: "GET"
      url: "/cdb/dzvip/teamvip/getLevelUserList?page=1&limit=10&level=1&phone=autotester309113&vipType="
      params: null
      headers:
        Authorization: "${token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识"
          type: "eq"
          value: true
          jsonpath: "$.json.success"

      - assert:
          check: "验证data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

