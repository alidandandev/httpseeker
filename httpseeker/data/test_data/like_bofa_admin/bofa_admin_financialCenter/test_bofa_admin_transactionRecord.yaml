# 点赞博发web站点登录后默认API测试用例集合
config:
  allure:
    epic: "对bofa_admin后台管理系统中财务中心-交易记录信息查询"
    feature: "admin后台管理系统中 财务中心-transactionRecord的交易记录信息查询"
    story: "默认API接口测试:test_bofa_admin_transactionRecord的交易记录信息查询"
    severity: "critical"

  request:
    env: "like_bofa_admin_test.env"  # 需要在run_env目录下创建qat.env文件
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false
    encryption_enabled: false
    encryption_key: "your-32-byte-secure-aes-key-1234"  # 32字节的AES密钥

  module: "default_apis_test"

test_steps:
  - name: "测试调用account_encryptionEnabled接口"
    case_id: "bofa_admin_account_encryptionEnabled_001"
    description: "验证测试获取bofa_admin_account_encryptionEnabled"

    request:
      method: "GET"
      url: "/cdb/account/encryptionEnabled"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用account_login接口"
    case_id: "bofa_admin_account_login_001"
    description: "验证测试获取bofa_admin_account_login 并获取后台登录后生成的token用于后续其他测试场景"

    request:
      method: "POST"
      url: "/cdb/account/login"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        username: "tiger"  # 后台登录账号
        password: "O4zAs9Mz4aoYOirIST4Xyg==" # 后台登录密码
        ggcode: ""
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
            check: "验证返回响应data为不空"
            type: "not_eq"
            value: null
            jsonpath: "$.json.data."

      - extract:
          key: "authorization_admin_token"
          type: "cache"
          jsonpath: "$.json.data.token"

  - name: "测试调用查询transactionRecord的交易记录信息 默认无条件查询"
    case_id: "bofa_admin_transactionRecord_query_001"
    description: "验证测试transactionRecord_query_001 的交易记录信息 默认无条件查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/list"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: null
        orderNumber: null
        account: null
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"
      - extract:
          key: "frist_transactionRecord_id"
          type: "cache"
          jsonpath: "$.json.data.records[0].id"
      - extract:
          key: "frist_transactionRecord_idw"
          type: "cache"
          jsonpath: "$.json.data.records[0].idw"
      - extract:
          key: "frist_transactionRecord_sourceInvitationCode"
          type: "cache"
          jsonpath: "$.json.data.records[0].sourceInvitationCode"
      - extract:
          key: "frist_transactionRecord_uid"
          type: "cache"
          jsonpath: "$.json.data.records[0].uid"
      - extract:
          key: "frist_transactionRecord_money"
          type: "cache"
          jsonpath: "$.json.data.records[0].money"
      - extract:
          key: "frist_transactionRecord_previousBalance"
          type: "cache"
          jsonpath: "$.json.data.records[0].previousBalance"
      - extract:
          key: "frist_transactionRecord_afterBalance"
          type: "cache"
          jsonpath: "$.json.data.records[0].afterBalance"
      - extract:
          key: "frist_transactionRecord_remark"
          type: "cache"
          jsonpath: "$.json.data.records[0].remark"
      - extract:
          key: "frist_transactionRecord_transactionNumber"
          type: "cache"
          jsonpath: "$.json.data.records[0].transactionNumber"
      - extract:
          key: "frist_transactionRecord_additionAndSubtraction"
          type: "cache"
          jsonpath: "$.json.data.records[0].additionAndSubtraction"
      - extract:
          key: "frist_transactionRecord_account"
          type: "cache"
          jsonpath: "$.json.data.records[0].account"
      - extract:
          key: "frist_transactionRecord_topAccount"
          type: "cache"
          jsonpath: "$.json.data.records[0].userInfo.user.account"
      - extract:
          key: "frist_transactionRecord_orderNumber"
          type: "cache"
          jsonpath: "$.json.data.records[0].orderNumber"
      - extract:
          key: "frist_transactionRecord_transactionType"
          type: "cache"
          jsonpath: "$.json.data.records[0].transactionType"

  - name: "测试调用查询transactionRecord的交易记录汇总金额信息 默认无条件查询"
    case_id: "bofa_admin_transactionRecordSum_query_001"
    description: "验证测试transactionRecordSum_query_001 的交易记录汇总金额信息 默认无条件查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/sum"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: null
        orderNumber: null
        account: null
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中金额大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data"

  - name: "测试调用查询transactionRecord的交易记录信息 按顶级账户查询"
    case_id: "bofa_admin_transactionRecord_query_002"
    description: "验证测试transactionRecord_query_002 的交易记录信息 按顶级账户查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/list"
      params:
        page: 1
        limit: 20
        supAccount: "${frist_transactionRecord_topAccount}"
        transactionType: null
        orderNumber: null
        account: null
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询transactionRecord的交易记录汇总金额信息 按顶级账户查询"
    case_id: "bofa_admin_transactionRecordSum_query_002"
    description: "验证测试transactionRecordSum_query_002 的交易记录汇总金额信息 按顶级账户查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/sum"
      params:
        page: 1
        limit: 20
        supAccount: "${frist_transactionRecord_topAccount}"
        transactionType: null
        orderNumber: null
        account: null
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中金额大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data"

  - name: "测试调用查询transactionRecord的交易记录信息 按交易类型查询"
    case_id: "bofa_admin_transactionRecord_query_003"
    description: "验证测试transactionRecord_query_003 的交易记录信息 按交易类型查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/list"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: "${frist_transactionRecord_transactionType}"
        orderNumber: null
        account: null
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询transactionRecord的交易记录汇总金额信息 按交易类型查询"
    case_id: "bofa_admin_transactionRecordSum_query_003"
    description: "验证测试transactionRecordSum_query_003 的交易记录汇总金额信息 按交易类型查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/sum"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: "${frist_transactionRecord_transactionType}"
        orderNumber: null
        account: null
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中金额大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data"

  - name: "测试调用查询transactionRecord的交易记录信息 按订单编号查询"
    case_id: "bofa_admin_transactionRecord_query_004"
    description: "验证测试transactionRecord_query_004 的交易记录信息 按订单编号查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/list"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: null
        orderNumber: "${frist_transactionRecord_orderNumber}"
        account: null
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询transactionRecord的交易记录汇总金额信息 按订单编号查询"
    case_id: "bofa_admin_transactionRecordSum_query_004"
    description: "验证测试transactionRecordSum_query_004 的交易记录汇总金额信息 按订单编号查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/sum"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: null
        orderNumber: "${frist_transactionRecord_orderNumber}"
        account: null
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中金额大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data"

  - name: "测试调用查询transactionRecord的交易记录信息 按会员账号查询"
    case_id: "bofa_admin_transactionRecord_query_005"
    description: "验证测试transactionRecord_query_005 的交易记录信息 按会员账号查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/list"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: null
        orderNumber: null
        account: "${frist_transactionRecord_account}"
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询transactionRecord的交易记录汇总金额信息 按会员账号查询"
    case_id: "bofa_admin_transactionRecordSum_query_005"
    description: "验证测试transactionRecordSum_query_005 的交易记录汇总金额信息 按会员账号查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/sum"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: null
        orderNumber: null
        account: "${frist_transactionRecord_account}"
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中金额大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data"

  - name: "测试调用查询transactionRecord的交易记录信息 按交易创建时间日期范围查询"
    case_id: "bofa_admin_transactionRecord_query_006"
    description: "验证测试transactionRecord_query_006 的交易记录信息 按交易创建时间日期范围查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/list"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: null
        orderNumber: null
        account: null
        expireTimes: "2025-08-31 12:31:48"
        expireTimee: "2025-12-30 12:31:48"
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询transactionRecord的交易记录汇总金额信息 按交易创建时间日期范围查询"
    case_id: "bofa_admin_transactionRecordSum_query_006"
    description: "验证测试transactionRecordSum_query_006 的交易记录汇总金额信息 按交易创建时间日期范围查询"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/sum"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: null
        orderNumber: null
        account: null
        expireTimes: "2025-08-31 12:31:48"
        expireTimee: "2025-12-30 12:31:48"
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中金额大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data"

  - name: "测试调用查询transactionRecord的交易记录信息 对第一条交易记录修改备注内容"
    case_id: "bofa_admin_transactionRecord_modify_001"
    description: "验证测试transactionRecord_modify_001 的交易记录信息 对第一条交易记录修改备注内容"

    request:
      method: "PUT"
      url: "/cdb/dzuser/transaction"
      params: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: "json"
      body:
        id: "${frist_transactionRecord_id}"
        idw: "${frist_transactionRecord_idw}"
        sourceInvitationCode: "${frist_transactionRecord_sourceInvitationCode}"
        uid: "${frist_transactionRecord_uid}"
        account: "${frist_transactionRecord_account}"
        orderNumber: "${frist_transactionRecord_orderNumber}"
        money: "${frist_transactionRecord_money}"
        previousBalance: "${frist_transactionRecord_previousBalance}"
        afterBalance: "${frist_transactionRecord_afterBalance}"
        remark: "${frist_transactionRecord_remark} auto-test"
        transactionNumber: "${frist_transactionRecord_transactionNumber}"
        transactionType: "${frist_transactionRecord_transactionType}"
        additionAndSubtraction: "${frist_transactionRecord_additionAndSubtraction}"
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询transactionRecord的交易记录信息 按默认查询后导出"
    case_id: "bofa_admin_transactionRecord_ExportV2_001"
    description: "验证测试transactionRecord_ExportV2_001 的交易记录信息 按默认查询后导出"

    request:
      method: "GET"
      url: "/cdb/dzuser/transaction/transactionExportV2"
      params:
        page: 1
        limit: 20
        supAccount: null
        transactionType: null
        orderNumber: null
        account: null
        expireTimes: null
        expireTimee: null
        gmt: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 200
          jsonpath: "$.status_code"
