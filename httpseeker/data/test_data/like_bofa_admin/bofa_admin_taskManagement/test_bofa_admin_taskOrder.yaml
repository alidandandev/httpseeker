# 点赞博发web站点登录后默认API测试用例集合
config:
  allure:
    epic: "对bofa_admin后台管理系统中任务管理"
    feature: "admin后台管理系统中任务订单"
    story: "默认API接口测试"
    severity: "critical"

  request:
    env: "like_bofa_admin_test.env"
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false
    encryption_enabled: false
    encryption_key: "your-32-byte-secure-aes-key-1234"

  module: "default_apis_test"

test_steps:
  - name: "后台登录接口"
    case_id: "bofa_admin_account_login_001"
    description: "验证测试获取bofa_admin_account_login 并获取后台登录后生成的token用于后续其他测试场景"

    request:
      method: "POST"
      url: "/cdb/account/login"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        username: "admin"  # 后台登录账号
        password: "O4zAs9Mz4aoYOirIST4Xyg==" # 后台登录密码
        ggcode: ""
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
            check: "验证返回响应data为不空"
            type: "not_eq"
            value: null
            jsonpath: "$.json.data"

      - extract:
          key: "authorization_admin_token"
          type: "cache"
          jsonpath: "$.json.data.token"

  - name: "查询任务列表数据"
    case_id: "bofa_admin_taskOrder_002"
    description: "验证查询任务列表数据接口"

    request:
      method: "GET"
      url: "/cdb/dzdianzan/likeTaskOrder/list"
      params:
        page: 1
        limit: 20
        url:
        vip:
        account:
        status: 2
        taskType:
        idw:
        sourceInvitationCode:
        auditingName:
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应data为不空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

      - extract:
          key: "orderID"
          type: "cache"
          jsonpath: "$.json.data.records[0].id"

  - name: "批量审批任务订单"
    case_id: "bofa_admin_taskOrder_003"
    description: "验证批量审批任务订单接口"

    request:
      method: "POST"
      url: "/cdb/dzdianzan/likeTaskOrder/batchApplyTaskOrder"
      params: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: "json"
      body:
        ids:
          - ${orderID}
        remark: ''
        isAudit: true
        status: 3

      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "任务订单导出"
    case_id: "bofa_admin_taskOrder_004"
    description: "验证任务订单导出接口"

    request:
      method: "GET"
      url: "/cdb/dzdianzan/likeTaskOrder/recordExportV2"
      params:
        page: 1
        limit: 20
        url:
        vip:
        account:
        taskType:
        idw:
        sourceInvitationCode:
        auditingName:
        exportFields:
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null

      files: null



