# 点赞博发web站点登录后默认API测试用例集合
config:
  allure:
    epic: "对bofa_admin后台管理系统中任务管理"
    feature: "admin后台管理系统中任务"
    story: "默认API接口测试"
    severity: "critical"

  request:
    env: "like_bofa_admin_test.env"  # 需要在run_env目录下创建qat.env文件
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false
    encryption_enabled: false
    encryption_key: "your-32-byte-secure-aes-key-1234"  # 32字节的AES密钥

  module: "default_apis_test"

test_steps:

  - name: "后台登录接口"
    case_id: "bofa_admin_account_login_001"
    description: "验证测试获取bofa_admin_account_login 并获取后台登录后生成的token用于后续其他测试场景"

    request:
      method: "POST"
      url: "/cdb/account/login"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        username: "admin"  # 后台登录账号
        password: "O4zAs9Mz4aoYOirIST4Xyg==" # 后台登录密码
        ggcode: ""
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
            check: "验证返回响应data为不空"
            type: "not_eq"
            value: null
            jsonpath: "$.json.data"

      - extract:
          key: "authorization_admin_token"
          type: "cache"
          jsonpath: "$.json.data.token"
  - name: "新增任务"
    case_id: "bofa_admin_TaskList_002"
    description: "验证新增任务内容接口"

    request:
      method: "POST"
      url: "/cdb/dzdianzan/likeTask"
      params: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: "json"
      body:
        id: ''
        idw: ''
        name: 测试任务
        orderRequirements: spvip
        url: "${random_phone()}"
        taskType: 银牌
        taskNum: 4
        status: ''
        sort: 3
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "查询 任务 列表数据"
    case_id: "bofa_admin_TaskList_001"
    description: "验证查询 任务 列表数据接口"

    request:
      method: "GET"
      url: "/cdb/dzdianzan/likeTask/list"
      params:
        page: 1
        limit: 20
        orderRequirements:
        url:
        taskType:
        status:
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data内容返回记录数不为0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

      - extract:
          key: "task_id"
          type: "cache"
          jsonpath: "$.json.data.records[0].id"

      - extract:
          key: "idw"
          type: "cache"
          jsonpath: "$.json.data.records[0].id"





  - name: "批量新增任务"
    case_id: "bofa_admin_TaskList_003"
    description: "验证批量新增任务接口"

    request:
      method: "POST"
      url: "/cdb/dzdianzan/likeTask/likeTaskbatchAdd"
      params:
        name: 任务
        url: 呜呜呜呜呜呜呜呜呜呜呜呜
        taskType: 鑽石vip區
        taskNum: 1
        orderRequirements: spvip
        status: 1
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"





  - name: "删除任务数据"
    case_id: "bofa_admin_Task_004"
    description: "校验删除任务数据"

    request:
      method: "DELETE"
      url: "/cdb/dzdianzan/likeTask/likeTaskBatchDelete"
      params: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: "json"
      body:
        [{'modifyBy': 1, 'isAudit': None, 'sort': 3, 'url': '放放风', 'createBy': 1, 'taskType': '银牌', 'modifyTime': '2025-11-20 08:00:40', 'createTime': '2025-11-20 08:00:40', 'orderRequirements': 'spvip', 'name': '测试任务', 'id': "${task_id}", 'idw': "${idw}", 'taskNum': 4, 'status': 2}]

      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"


  - name: "导出数据"
    case_id: "bofa_admin_Task_005"
    description: "校验导出页面数据"

    request:
      method: "GET"
      url: "/cdb/dzdianzan/likeTask/recordExportV2"
      params:
        page: 22
        limit: 20
        orderRequirements:
        url:
        taskType:
        status:
        exportFields:
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null



  - name: "编辑任务内容"
    case_id: "bofa_admin_Task_6"
    description: "校验编辑任务数据"

    request:
      method: "PUT"
      url: "/cdb/dzdianzan/likeTask"
      params: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: "json"
      body:
        id: 1175
        idw: '1855848857195483136'
        name: yoyoyo
        orderRequirements: spvip
        url: 'https://zh.uniapp.dcloud.io/tutorial/i18n.html'
        taskType: 鑽石vip區
        taskNum: 99
        status: 3
        sort: 5

      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"







  - name: "启动任务"
    case_id: "bofa_admin_Task_7"
    description: "校验启动任务数据"

    request:
      method: "POST"
      url: "/cdb/dzdianzan/likeTask/startOrEndTask"
      params: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: "json"
      body:
        id: 1175
        status : 1

      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"


  - name: "结束任务"
    case_id: "bofa_admin_Task_8"
    description: "校验结束任务数据"

    request:
      method: "POST"
      url: "/cdb/dzdianzan/likeTask/startOrEndTask"
      params: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: "json"
      body:
        id: 1175
        status: 3

      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"





  - name: "导出任务数据"
    case_id: "bofa_admin_Task_9"
    description: "校验导出任务数据"

    request:
      method: "GET"
      url: "/cdb/dzdianzan/likeTask/recordExportV2"
      params:
        page: 22
        limit: 20
        orderRequirements:
        url:
        taskType:
        status:
        exportFields:
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null


