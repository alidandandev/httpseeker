# 点赞博发 web 站点登录后默认 API 测试用例集合
config:
  allure:
    epic: "对 bofa_admin 后台管理系统中审批管理进行操作"
    feature: "admin 后台管理系统 - 银行卡充值审批"
    story: "默认 API 接口测试"
    severity: "critical"

  request:
    env: "like_bofa_admin_test.env"
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false
    encryption_enabled: false
    encryption_key: "your-32-byte-secure-aes-key-1234"

  module: "default_apis_test"


test_steps:
  - name: "后台登录接口"
    case_id: "bofa_admin_account_login_001"
    description: "验证获取后台登录 token，用于后续审批管理相关接口调用"

    request:
      method: "POST"
      url: "/cdb/account/login"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        username: "admin"
        password: "O4zAs9Mz4aoYOirIST4Xyg=="
        ggcode: ""
      files: null

    teardown:
      - assert:
          check: "验证请求成功 - code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识 - msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回 data 不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

      - extract:
          key: "authorization_admin_token"
          type: "cache"
          jsonpath: "$.json.data.token"



  - name: "查询银行卡充值审批列表数据"
    case_id: "bofa_admin_recharge_001"
    description: "验证查询银行卡充值审批列表接口"

    request:
      method: "GET"
      url: "/cdb/dzuser/rechargehistory/list"
      params:
        page: 1
        limit: 20
        rechargeStatus: 2
        channelName: null
        account: null
        orderNumber: null
        expireTimes: "2025-08-20 15:59:12"
        expireTimee: "2025-11-18 15:59:12"
        sourceInvitationCode: null
        countryCodeNumber: null
        vipType: null
        gmt: null
        withdrawalAddress: null
        firstCharge: null
        channelType: "bank"
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功 - code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识 - msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回记录总数不为 0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"



  - name: "查看银行卡充值审批报表数据"
    case_id: "bofa_admin_recharge_002"
    description: "验证银行卡充值审批报表统计数据接口"

    request:
      method: "GET"
      url: "/cdb/dzuser/rechargehistory/findCountMoney"
      params:
        page: 1
        limit: 20
        rechargeStatus: 2
        channelName: null
        account: null
        orderNumber: null
        expireTimes: "2025-08-20 15:59:12"
        expireTimee: "2025-11-18 15:59:12"
        sourceInvitationCode: null
        countryCodeNumber: null
        vipType: null
        gmt: null
        withdrawalAddress: null
        firstCharge: null
        channelType: "bank"
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功 - code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回成功标识 - msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回数据不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  - name: "标记完成功能-接口执行结果报错"
    case_id: "bofa_admin_recharge_003"
    description: "验证标记完成功能接口"

    request:
      method: "POST"
      url: "/cdb/dzuser/withdrawals/updateManual"
      params: null
      headers:
        authorization: "${authorization_admin_token}"
      cookies: null
      body_type: "json"
      body:
        - channelName_str: "AAPayments"

          userInfo:
            id: 286221
            createTime: "2025-11-12 17:10:43"
            createBy: -1
            modifyTime: "2025-11-12 17:59:11"
            modifyBy: -1

            user:
              id: 223
              createTime: "2025-10-14 08:12:32"
              createBy: 150
              modifyTime: "2025-11-10 03:06:57"
              modifyBy: -1
              avatar: null
              account: "ethan"
              name: "ethan"
              birthday: "0002-11-29 16:00:00"
              sex: 1
              email: "@qq.com"
              phone: "86"
              roleid: "1,"
              deptid: 1
              status: 1
              version: null
              ucode: "d79g4x"
              googleEnable: 1
              safeEnable: 0

              dept:
                id: 1
                createTime: null
                createBy: null
                modifyTime: null
                modifyBy: null
                num: 1
                pid: 0
                pids: "[0],"
                simplename: "总公司"
                fullname: "总公司"

            limitBuyCdb: 2
            limitDrawing: 2
            limitProfit: 2
            limitCode: 2
            idw: "1988655708449546240"
            sourceInvitationCode: "d79g4x"
            countryCodeNumber: "86"
            superiorId: 286220
            invitationCode: "d072eq"
            name: "v人的"
            realName: "dasdas"
            email: null
            headPortraitKey: "https://8xzlef11.oss-cn-hongkong.aliyuncs.com/aly/20251112/1762970350186_6623.jpg"
            levels: null
            account: "4324234234234"
            password: "b32ec51961b0e7e6eaf8f97f068640ca"
            paymentPassword: "b32ec51961b0e7e6eaf8f97f068640ca"
            userType: "1"
            vipType: "v5"
            vipExpireDate: "2025-11-15 17:49:20"
            registerIp: "182.160.8.143"
            lastIp: "182.160.8.143"
            registerIpCity: "[香港,香港]"
            lastIpCity: "[香港,香港]"
            lastTime: "2025-11-12 17:11:58"
            registrationTime: "2025-11-12 17:10:43"
            dzstatus: 1
            remark: null
            fidw: null
            feeModeCus: 0
            feeMode: 0
            withdrawalFee: null
            minimumWithdrawal: null
            maximumWithdrawal: null
            feeRange: []
            frontIncomeSwitch: 0
            frontIncomeAmount: 0
            totalRechargeAmountLeft: null
            teamVIPOpeningTotalRebate: null
            taskMoney: null
            taskAccount: null
            remakeNumOK: null
            moneyOK: null
            moneyNO: null
            totalBonusIncomeLeft: null
            userBalanceLeft: null
            teamVIPOpeningTotal: null
            vipImg: null
            vipPrice: null
            walletAddress: null
            superAccount: null
            numberOfSubordinates: null
            profitAmount: null

          orderNumber: "tx202511121758370190024"
          handlingFee: 3.2
          rechargeStatus: "no"
          channelType: "USDT.TRC20"
          remark: ""
          operator: null
          amountReceived: 16.8
          previousBalance: 18923.25
          uid: 286221
          modifyTime: "2025-11-12 17:58:37"
          rechargeStatus_str: "审核中"
          id: 936
          afterBalance: 18903.25
          withdrawalAddress: "TTQR1gmnhqGN4d8AGPi2rnPoRcj5arrLPb"
          modifyBy: -1
          vipType_str: "Vip5"
          withNum: 3
          transactionNumber: "dasdas"
          createBy: -1
          money: 20
          createTime: "2025-11-12 17:58:37"
          fidw: null
          channelName: "AAPayments"
          upWithdrawalAddress: ""
          idw: "1988667762979905536"
          account: "4324234234234"

      files: null

    teardown:
      - assert:
          check: "验证响应状态码为20000"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回信息为 success"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"
