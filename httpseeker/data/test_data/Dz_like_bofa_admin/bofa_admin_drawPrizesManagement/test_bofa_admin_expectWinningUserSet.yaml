# 点赞博发web站点登录后默认API测试用例集合
config:
  allure:
    epic: "对bofa_admin后台管理系统中抽奖管理-expectWinningUserSet的用户预期中奖设置 进行相关api接口触发业务校验"
    feature: "admin后台管理系统中 抽奖管理-expectWinningUserSet的用户预期中奖设置"
    story: "默认API接口测试:test_bofa_admin_expectWinningUserSet用户预期中奖设置"
    severity: "critical"

  request:
    env: "Dz_like_bofa_admin.env"  # 需要在run_env目录下创建qat.env文件
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false
    encryption_enabled: false
    encryption_key: "your-32-byte-secure-aes-key-1234"  # 32字节的AES密钥

  module: "default_apis_test"

test_steps:
  - name: "测试调用account_encryptionEnabled接口"
    case_id: "bofa_admin_account_encryptionEnabled_001"
    description: "验证测试获取bofa_admin_account_encryptionEnabled"

    request:
      method: "GET"
      url: "/cdb/account/encryptionEnabled"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询奖品记录列表 prize_getPrizeList接口"
    case_id: "bofa_admin_prize_getPrizeList_001"
    description: "验证测试新增用户中奖设置之前先获取type=1转盘活动中奖品列表信息 并提出某条奖品记录"

    request:
      method: "GET"
      url: "/cdb/dzprize/prize/getPrizeList"
      params:
        prizeType: 1
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - extract:
          key: "prize_id"
          type: "cache"
          jsonpath: "$.json.data[4].id"
      - extract:
          key: "prize_idw"
          type: "cache"
          jsonpath: "$.json.data[4].idw"

  - name: "测试新增用户与奖品设置 red_prize_expectWinningUser 新增接口 "
    case_id: "bofa_admin_prize_expectWinningUser_add_001"
    description: "验证测试新增bofa_admin_prize_expectWinningUser_add_001 新增用户与奖品设置"

    request:
      method: "POST"
      url: "/cdb/dzprize/expectwinninguser"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        id: ""
        idw: ""
        sourceInvitationCode: ""
        uid: ""
        account: "990982220"
        prizeIdw: "${prize_idw}"
        isPrize: ""
        prizeType: 1
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用用户与奖品设置 red_prize_expectWinningUser 默认无条件查询接口 "
    case_id: "bofa_admin_expectWinningUser_query_001"
    description: "验证测试新增bofa_admin_expectWinningUser_query_001 默认无条件查询接口 "

    request:
      method: "GET"
      url: "/cdb/dzprize/expectwinninguser/list"
      params:
        page: 1
        limit: 20
        account: null
        prizeType:
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data中满足查询条件的条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用用户与奖品设置 red_prize_expectWinningUser 按条件查询之前新增记录 "
    case_id: "bofa_admin_expectWinningUser_query_002"
    description: "验证测试新增bofa_admin_expectWinningUser_query_002 按条件查询之前新增记录"

    request:
      method: "GET"
      url: "/cdb/dzprize/expectwinninguser/list"
      params:
        page: 1
        limit: 20
        account: "990982220"
        prizeType: 1
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data中满足查询条件的条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

      - extract:
          key: "new_expectWinningUser_id"
          type: "cache"
          jsonpath: "$.json.data.records[0].id"
      - extract:
          key: "new_expectWinningUser_idw"
          type: "cache"
          jsonpath: "$.json.data.records[0].idw"

  - name: "测试调用删除用户与奖品设置 red_prize_expectWinningUser 对新增记录进行删除 "
    case_id: "bofa_admin_expectWinningUser_del_001"
    description: "验证测试新增bofa_admin_expectWinningUser_del_001  对新增记录进行删除"

    request:
      method: "DELETE"
      url: "/cdb/dzprize/expectwinninguser"
      params:
        id: "${new_expectWinningUser_id}"
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用删除用户与奖品设置 red_prize_expectWinningUser 一键删除 "
    case_id: "bofa_admin_expectWinningUser_delAll_001"
    description: "验证测试新增bofa_admin_expectWinningUser_delAll_001  一键删除"

    request:
      method: "DELETE"
      url: "/cdb/dzprize/expectwinninguser/removeAll"
      params:
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询抽奖活动类型  "
    case_id: "bofa_admin_prizeActivityTypeQuery_001"
    description: "验证测试prizeActivityTypeQuery_001 抽奖活动类型 "

    request:
      method: "GET"
      url: "/cdb/dict/getDicts/%E6%B4%BB%E5%8A%A8%E7%B1%BB%E5%9E%8B"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  - name: "测试调用查询抽奖活动类型  "
    case_id: "bofa_admin_prizeActivityTypeQuery_001"
    description: "验证测试prizeActivityTypeQuery_001 抽奖活动类型 "

    request:
      method: "GET"
      url: "/cdb/dict/getDicts/%E6%B4%BB%E5%8A%A8%E7%B1%BB%E5%9E%8B"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"