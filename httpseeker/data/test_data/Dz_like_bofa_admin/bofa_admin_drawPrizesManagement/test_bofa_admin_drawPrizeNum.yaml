# 点赞博发web站点登录后默认API测试用例集合
config:
  allure:
    epic: "对bofa_admin后台管理系统中抽奖管理-drawPrizeNum的抽奖次数设置进行相关api接口触发业务校验"
    feature: "admin后台管理系统中 抽奖管理-drawPrizeNum的抽奖次数设置进行相关api接口触发业务校验"
    story: "默认API接口测试:test_bofa_admin_winningPrizeRecord的抽奖次数设置查询"
    severity: "critical"

  request:
    env: "Dz_like_bofa_admin.env"  # 需要在run_env目录下创建qat.env文件
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false
    encryption_enabled: false
    encryption_key: "your-32-byte-secure-aes-key-1234"  # 32字节的AES密钥

  module: "default_apis_test"

test_steps:
  - name: "测试调用account_encryptionEnabled接口"
    case_id: "bofa_admin_account_encryptionEnabled_001"
    description: "验证测试获取bofa_admin_account_encryptionEnabled"

    request:
      method: "GET"
      url: "/cdb/account/encryptionEnabled"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询中奖次数列表 prizeNum 默认无条件查询"
    case_id: "bofa_admin_prizeNum_query_001"
    description: "验证测试prizeNum_query_001 查询中奖次数信息 默认无条件查询"

    request:
      method: "GET"
      url: "/cdb/dzprize/prizenum/list"
      params:
        page: 1
        limit: 20
        account: null
        prizeType: null
        superAccount: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试用户抽奖次数上下分 prizeNum_upOrDownPoints 上分"
    case_id: "bofa_admin_prizeNum_upOrDownPoints_001"
    description: "验证测试prizeNum_upOrDownPoints_001 对用户抽奖次数进行上分"

    request:
      method: "POST"
      url: "/cdb/dzprize/prizenum/upOrDownPoints"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        id: ""
        idw: ""
        sourceInvitationCode: ""
        uid: ""
        account: "42342423423"
        prizeNum: "10"
        isAdd: 1
        prizeType: "1"
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"


  - name: "测试用户抽奖次数上下分 prizeNum_upOrDownPoints 下分 "
    case_id: "bofa_admin_prizeNum_upOrDownPoints_002"
    description: "验证测试prizeNum_upOrDownPoints_002 对用户抽奖次数进行下分"

    request:
      method: "POST"
      url: "/cdb/dzprize/prizenum/upOrDownPoints"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        id: ""
        idw: ""
        sourceInvitationCode: ""
        uid: ""
        account: "42342423423"
        prizeNum: "10"
        isAdd: 2
        prizeType: "1"
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试用户抽奖次数上下分 prizeNum_upOrDownPoints 上下分不能超过10"
    case_id: "bofa_admin_prizeNum_upOrDownPoints_003"
    description: "验证测试prizeNum_upOrDownPoints_003 对用户抽奖次数进行上下分时校验次数不能大于10"

    request:
      method: "POST"
      url: "/cdb/dzprize/prizenum/upOrDownPoints"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        id: ""
        idw: ""
        sourceInvitationCode: ""
        uid: ""
        account: "42342423423"
        prizeNum: "11"
        isAdd: 1
        prizeType: "2"
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code9999"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

  - name: "测试用户抽奖次数上下分 prizeNum_upOrDownPoints 下分时当前用户无抽奖次数"
    case_id: "bofa_admin_prizeNum_upOrDownPoints_004"
    description: "验证测试prizeNum_upOrDownPoints_004 对用户下分时当前用户无抽奖次数校验"

    request:
      method: "POST"
      url: "/cdb/dzprize/prizenum/upOrDownPoints"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        id: ""
        idw: ""
        sourceInvitationCode: ""
        uid: ""
        account: "42342423423"
        prizeNum: "1"
        isAdd: 2
        prizeType: "3"
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code9999"
          type: "eq"
          value: 9999
          jsonpath: "$.json.code"

  - name: "测试调用查询中奖次数列表 prizeNum 按用户账号account查询"
    case_id: "bofa_admin_prizeNum_query_002"
    description: "验证测试wprizeNum_query_002 查询中奖次数信息 按用户账号account查询"

    request:
      method: "GET"
      url: "/cdb/dzprize/prizenum/list"
      params:
        page: 1
        limit: 20
        account: "42342423423"
        prizeType: null
        superAccount: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询中奖次数列表 prizeNum 按顶级账号superAccount查询"
    case_id: "bofa_admin_prizeNum_query_003"
    description: "验证测试wprizeNum_query_003 查询中奖次数信息 按顶级账号superAccount查询"

    request:
      method: "GET"
      url: "/cdb/dzprize/prizenum/list"
      params:
        page: 1
        limit: 20
        account: null
        prizeType: null
        superAccount: "ethan"
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询中奖次数列表 prizeNum 按抽奖活动类型prizeType查询"
    case_id: "bofa_admin_prizeNum_query_004"
    description: "验证测试wprizeNum_query_004 查询中奖次数信息 按抽奖活动类型prizeType查询"

    request:
      method: "GET"
      url: "/cdb/dzprize/prizenum/list"
      params:
        page: 1
        limit: 20
        account: null
        prizeType: "1"
        superAccount: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中记录条数大于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询抽奖活动类型  "
    case_id: "bofa_admin_prizeActivityTypeQuery_001"
    description: "验证测试prizeActivityTypeQuery_001 抽奖活动类型 "

    request:
      method: "GET"
      url: "/cdb/dict/getDicts/%E6%B4%BB%E5%8A%A8%E7%B1%BB%E5%9E%8B"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"