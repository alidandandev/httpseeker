# 点赞博发web站点登录后默认API测试用例集合
config:
  allure:
    epic: "对bofa_admin后台管理系统中信誉分管理中userCredit的用户信誉分上下分和查询进行设置 进行相关api接口触发业务校验"
    feature: "admin后台管理系统中 信誉分管理中userCredit的用户信誉分上下分和查询进行设置"
    story: "默认API接口测试:test_bofa_admin_userCredit的用户信誉分上下分和查询进行设置"
    severity: "critical"

  request:
    env: "Dz_like_bofa_admin.env"  # 需要在run_env目录下创建qat.env文件
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false
    encryption_enabled: false
    encryption_key: "your-32-byte-secure-aes-key-1234"  # 32字节的AES密钥

  module: "default_apis_test"

test_steps:
  - name: "测试调用account_encryptionEnabled接口"
    case_id: "bofa_admin_account_encryptionEnabled_001"
    description: "验证测试获取bofa_admin_account_encryptionEnabled"

    request:
      method: "GET"
      url: "/cdb/account/encryptionEnabled"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询VIP类型  "
    case_id: "bofa_admin_VIPTypeQuery_001"
    description: "验证测试VIPTypeQuery_001 VIP类型   "

    request:
      method: "GET"
      url: "/cdb/dict/getDicts/ViP%E7%B1%BB%E5%9E%8B"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  - name: "测试调用查询creditStatusTypeQuery 信誉分状态类型  "
    case_id: "bofa_admin_creditStatusTypeQuery_001"
    description: "验证测试creditStatusTypeQuery_001 信誉分状态类型   "

    request:
      method: "GET"
      url: "/cdb/dict/getDicts/%E4%BF%A1%E8%AA%89%E5%88%86%E7%8A%B6%E6%80%81"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data不为空"
          type: "not_eq"
          value: null
          jsonpath: "$.json.data"

  - name: "测试调用查询userCredit的用户信誉分 按照默认无条件查询"
    case_id: "bofa_admin_userCredit_query_001"
    description: "验证测试获取bofa_admin_userCredit_query 默认按照无条件查询 提取所返回的前三条数据进行后续业务校验"

    request:
      method: "GET"
      url: "/cdb/dzcredit/usercredit/list"
      params:
        page: 1
        limit: 20
        account: null
        status: null
        vipType: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data中总条数不等于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"
      - extract:
          key: "user_account_0"
          type: "cache"
          jsonpath: "$.json.data.records[0].account"
      - extract:
          key: "user_account_1"
          type: "cache"
          jsonpath: "$.json.data.records[1].account"
      - extract:
          key: "user_account_2"
          type: "cache"
          jsonpath: "$.json.data.records[2].account"

  - name: "测试调用查询userCredit的用户信誉分 按照用户账户查询"
    case_id: "bofa_admin_userCredit_query_002"
    description: "验证测试获取bofa_admin_userCredit_query 按照用户账户查询 "

    request:
      method: "GET"
      url: "/cdb/dzcredit/usercredit/list"
      params:
        page: 1
        limit: 20
        account: "${user_account_0}"
        status: null
        vipType: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data中总条数不等于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询userCredit的用户信誉分 按照用户的信誉分状态查询"
    case_id: "bofa_admin_userCredit_query_003"
    description: "验证测试获取bofa_admin_userCredit_query 按照用户的信誉分状态查询 "

    request:
      method: "GET"
      url: "/cdb/dzcredit/usercredit/list"
      params:
        page: 1
        limit: 20
        account: null
        status: "1"   # 1:正常状态
        vipType: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data中总条数不等于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用查询userCredit的用户信誉分 按照用户的VIP等级来查询"
    case_id: "bofa_admin_userCredit_query_004"
    description: "验证测试获取bofa_admin_userCredit_query 按照用户的VIP等级来查询 "

    request:
      method: "GET"
      url: "/cdb/dzcredit/usercredit/list"
      params:
        page: 1
        limit: 20
        account: null
        status: null
        vipType: "v1,v0,v2"
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data中总条数不等于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

  - name: "测试调用 userCredit的批量用户上分信誉分接口 "
    case_id: "bofa_admin_userCredit_upOrDownCreditBatch_001"
    description: "验证测试新增bofa_admin_userCredit_upOrDownCreditBatch 的批量用户上分信誉分接口 "

    request:
      method: "POST"
      url: "/cdb/dzcredit/usercredit/upOrDownCreditBatch"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        userCreditDtoList: [{"account": "${user_account_0}","credit": 200,"isAdd": 1},{"account": "${user_account_1}","credit": 200,"isAdd": 1},{"account": "${user_account_2}","credit": 100,"isAdd": 1}]
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用 userCredit的批量用户下分信誉分接口 "
    case_id: "bofa_admin_userCredit_upOrDownCreditBatch_002"
    description: "验证测试新增bofa_admin_userCredit_upOrDownCreditBatch 的批量用户下分信誉分接口 "

    request:
      method: "POST"
      url: "/cdb/dzcredit/usercredit/upOrDownCreditBatch"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        userCreditDtoList: [{"account": "${user_account_0}","credit": 190,"isAdd": 2},{"account": "${user_account_1}","credit": 190,"isAdd": 2},{"account": "${user_account_2}","credit": 90,"isAdd": 2}]
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询userCredit的用户信誉分记录  按默认查询后导出"
    case_id: "bofa_admin_userCredit_ExportV2_001"
    description: "验证测试userCredit_ExportV2_001 的用户信誉分记录 按默认查询后导出"

    request:
      method: "GET"
      url: "/cdb/dzcredit/usercredit/exportXlsV2"
      params:
        page: 1
        limit: 20
        account: null
        status: null
        vipType: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 200
          jsonpath: "$.status_code"