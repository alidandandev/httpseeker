# 点赞博发web站点登录后默认API测试用例集合
config:
  allure:
    epic: "对bofa_admin后台管理系统中用户积分管理中signInScoreSet的登录积分设置 进行相关api接口触发业务校验"
    feature: "admin后台管理系统中用户积分管理中signInScoreSet的登录积分设置"
    story: "默认API接口测试:test_bofa_admin_signInScoreSet的登录积分设置"
    severity: "critical"

  request:
    env: "like_bofa_admin_test.env"  # 需要在run_env目录下创建qat.env文件
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false
    encryption_enabled: false
    encryption_key: "your-32-byte-secure-aes-key-1234"  # 32字节的AES密钥

  module: "default_apis_test"

test_steps:
  - name: "测试调用account_encryptionEnabled接口"
    case_id: "bofa_admin_account_encryptionEnabled_001"
    description: "验证测试获取bofa_admin_account_encryptionEnabled"

    request:
      method: "GET"
      url: "/cdb/account/encryptionEnabled"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用新增 signInScoreSet的登录积分设置接口 "
    case_id: "bofa_admin_signInScoreSet_add_001"
    description: "验证测试新增bofa_admin_signInScoreSet_add 新增登录积分设置接口 "

    request:
      method: "POST"
      url: "/cdb/dzscore/signInSet"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        idw: null
        dayIndex: "100"
        rewardAmount: "100"
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询signInScoreSet的登录积分设置接口 默认无条件查询"
    case_id: "bofa_admin_signInScoreSete_query_001"
    description: "验证测试获取bofa_admin_signInScoreSet_query 默认无条件查询 取第一条新增数据进行修改"

    request:
      method: "GET"
      url: "/cdb/dzscore/signInSet/list"
      params:
        page: 1
        limit: 20
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

      - assert:
          check: "验证返回响应中data中总条数不等于0"
          type: "not_eq"
          value: 0
          jsonpath: "$.json.data.total"

      - extract:
          key: "new_signInScoreSet_id"
          type: "cache"
          jsonpath: "$.json.data.records[0].id"
      - extract:
          key: "new_signInScoreSet_idw"
          type: "cache"
          jsonpath: "$.json.data.records[0].idw"

  - name: "测试对新增signInScoreSet的登录积分设置 进行修改"
    case_id: "bofa_admin_signInScoreSet_modify_001"
    description: "验证测试对新增登录积分设置 scorePrize进行修改"

    request:
      method: "POST"
      url: "/cdb/dzscore/signInSet"
      params: null
      headers: null
      cookies: null
      body_type: "json"
      body:
        id: "${new_signInScoreSet_id}"
        dayIndex: "99"
        idw: "${new_signInScoreSet_idw}"
        rewardAmount: "99"
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试对新增signInScoreSet的登录积分设置  进行删除  (操作栏没有删除功能，尝试一下次方法主要是避免数据一致增加不删除)"
    case_id: "bofa_admin_signInScoreSet_del_001"
    description: "验证测试对新增signInScoreSet的登录积分设置  进行删除"

    request:
      method: "DELETE"
      url: "/cdb/dzscore/signInSet"
      params:
        id: "${new_scorePrize_id}"  # idw: "${new_scorePrize_idw}"
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求异常--code 9999"
          type: "eq"
          value: 9999
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应 该操作未授权--msg"
          type: "eq"
          value: "该操作未授权"
          jsonpath: "$.json.msg"