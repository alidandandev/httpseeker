# 点赞博发web站点登录后默认API测试用例集合
config:
  allure:
    epic: "对bofa_admin后台管理系统中共享钱包管理-用户购买钱包产品记录信息查询"
    feature: "admin后台管理系统中 共享钱包管理-shareWalletRecord的用户购买钱包产品记录信息查询"
    story: "默认API接口测试:test_bofa_admin_shareWalletRecord的用户购买钱包产品记录信息查询"
    severity: "critical"

  request:
    env: "Dz_like_bofa_admin.env"  # 需要在run_env目录下创建qat.env文件
    headers:
      Content-Type: "application/json"
    timeout: 30
    verify: false
    encryption_enabled: false
    encryption_key: "your-32-byte-secure-aes-key-1234"  # 32字节的AES密钥

  module: "default_apis_test"

test_steps:
  - name: "测试调用account_encryptionEnabled接口"
    case_id: "bofa_admin_account_encryptionEnabled_001"
    description: "验证测试获取bofa_admin_account_encryptionEnabled"

    request:
      method: "GET"
      url: "/cdb/account/encryptionEnabled"
      params: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询用户购买钱包产品记录 shareWalletRecord 默认无条件查询"
    case_id: "bofa_admin_shareWalletRecord_query_001"
    description: "验证测试shareWalletRecord_query_001 查询用户购买钱包产品记录 默认无条件查询,返回第一条记录提取关键字作为后续查询条件"

    request:
      method: "GET"
      url: "/cdb/dzwallet/sharedrecord/list"
      params:
        page: 1
        limit: 20
        expireTimes: null
        expireTimee: null
        account: null
        status: null
        name: null
        lockDate: null
        sourceInvitationCode: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询用户购买钱包产品记录 shareWalletRecord 按记录当前所处状态查询"
    case_id: "bofa_admin_shareWalletRecord_query_005"
    description: "验证测试shareWalletRecord_query_005 查询用户购买钱包产品记录 按记录当前所处状态0=已结束查询"

    request:
      method: "GET"
      url: "/cdb/dzwallet/sharedrecord/list"
      params:
        page: 1
        limit: 20
        expireTimes: null
        expireTimee: null
        account: null
        status: "0"
        name: null
        lockDate: null
        sourceInvitationCode: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询用户购买钱包产品记录 shareWalletRecord 按时间日期范围查询"
    case_id: "bofa_admin_shareWalletRecord_query_006"
    description: "验证测试shareWalletRecord_query_006 查询用户购买钱包产品记录 按时间日期范围查询"

    request:
      method: "GET"
      url: "/cdb/dzwallet/sharedrecord/list"
      params:
        page: 1
        limit: 20
        expireTimes: "${generate_time_90_days_ago()}"
        expireTimee: "${generate_today_time()}"
        account: null
        status: null
        name: null
        lockDate: null
        sourceInvitationCode: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 20000
          jsonpath: "$.json.code"

      - assert:
          check: "验证返回响应成功标识--msg"
          type: "eq"
          value: "success"
          jsonpath: "$.json.msg"

  - name: "测试调用查询用户购买钱包产品记录 shareWalletRecord记录  按默认查询后导出"
    case_id: "bofa_admin_shareWalletRecord_ExportV2_001"
    description: "验证测试shareWalletRecord_ExportV2_001 的shareWalletRecord记录 按默认查询后导出"

    request:
      method: "GET"
      url: "/cdb/dzwallet/sharedrecord/sharedWalletRecordExportV2"
      params:
        page: 1
        limit: 20
        expireTimes: null
        expireTimee: null
        account: null
        status: null
        name: null
        lockDate: null
        sourceInvitationCode: null
      headers: null
      cookies: null
      body_type: null
      body: null
      files: null

    teardown:
      - assert:
          check: "验证请求成功--code"
          type: "eq"
          value: 200
          jsonpath: "$.status_code"
